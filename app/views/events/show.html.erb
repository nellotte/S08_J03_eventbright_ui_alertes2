<p style="color: green"><%= notice %></p>

<div class="card text-center">
  <div class="card-header">
    <%= @event.title %>
  </div>
  <div class="card-body">
    <h5 class="card-title">Description</h5>
    <p class="card-text"><%= @event.description %></p>
    <!-- Ville de l'événement -->
    <p class="card-text">Ville : <%= @event.location %></p>
    <!-- date de début -->
    <p class="card-text">Date de début: <%= @event.start_date.strftime("%d/%m/%Y") %></p>
    <!-- heure de début -->
    <p class="card-text">Heure de début: <%= @event.start_date.strftime("%H:%M") %></p>
    <!--heure de fin -->
    <p class="card-text">Heure de fin: <%= (@event.start_date + @event.duration.minutes).strftime("%H:%M") %></p>
    <!-- Durée de l'événement -->
    <p class="card-text">Durée : <%= @event.duration %> minutes</p>
    <!-- nombre de participants -->
    <p class="card-text">Participants: <%= @event.users.count %></p>
    <!-- Prix de l'événement -->
    <p class="card-text">Prix : <%= number_to_currency(@event.price) %></p>
    <!-- Bouton "Modifier" -->
    <% if current_user == @event.admin %>
      <%= link_to "Modifier", edit_event_path(@event), class: "btn btn-primary" %>
    <% end %>
    <!-- Bouton "Participer" -->
    <% if current_user != @event.admin && current_user != current_user.participating?(@event)&& !current_user.participating?(@event) %>
      <%= button_to "Passer commande (NEXT GEN)", checkout_create_path(total: @event.price, event_id: @event.id), class: "btn btn-primary", data: {turbo: false} %>
    <% elsif current_user != @event.admin %>
      <%= button_to "Déjà participé", "#", class: "btn btn-secondary", disabled: true %>
    <% end %>
    <!-- Bouton "Supprimer" -->
    <% if current_user == @event.admin %>
      <%= link_to "Supprimer", @event, method: :delete, data: { confirm: "Êtes-vous sûr de vouloir supprimer cet événement ?" }, class: "btn btn-danger" %>
    <% end %>
    <!-- créé par -->
  </div>
  <div class="card-footer text-body-secondary">
    <p class="card-text">Créé par: <%= @event.admin.first_name %> <%= @event.admin.last_name %> </p>
  </div>
</div>

<% if current_user == @event.admin && @event.users.any? %>
  <div class="card text-center">
    <div class="card-header">
      Liste des participants
    </div>
    <div class="card-body">
      <!-- Participants de l'événement -->
      <h5 class="card-title">Participants</h5>
      <div>
        <% @event.users.each do |participant| %>
          <li><%= participant.first_name %>  <%= participant.last_name %></li>
        <% end %>
      </div>
    </div>
    <div class="card-footer text-body-secondary">
    </div>
  </div>
<% end %>

<%= render @event %>

